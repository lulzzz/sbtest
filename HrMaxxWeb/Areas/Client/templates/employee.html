<div class="row table-responsive">
	<div class="col-sm-12 alert alert-{{alert.type}}" ng-show="alert">
		{{alert.message}}
	</div>

	<div class="panel-group col-sm-12" id="accordion">

		<div class="panel panel-inverse overflow-hidden">
			<div class="panel-heading">
				<i class="fa fa-plus-circle pull-right"></i>
				<ul class="nav nav-tabs pull-right" id="companytabs">
					<li ng-class="{'active':data.tab===1}" ng-click="data.tab=1"><a data-toggle="tab"><i class="fa fa-info"></i> <span class="hidden-xs">Info</span></a></li>
					<li ng-class="{'active':data.tab===6}" ng-if="!isPopup" ng-show=" selected.id && showControls && data.viewVersions" ng-click="data.tab=6"><a data-toggle="tab"><i class="fa fa-list"></i> <span class="hidden-xs">Versions</span></a></li>
					<li ng-class="{'active':data.tab===5}" ng-if="!isPopup && mainData.userRole!=='Employee'" ng-show=" selected.id " ng-click="data.tab=5"><a data-toggle="tab"><i class="fa fa-archive"></i> <span class="hidden-xs">Documents</span></a></li>
					<li ng-class="{'active':data.tab===4}" ng-if="!isPopup && mainData.userRole!=='Employee'" ng-show=" selected.id " ng-click="data.tab=4"><a data-toggle="tab"><i class="fa fa-line-chart"></i> <span class="hidden-xs">Dashboard</span></a></li>
				</ul>
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						Employee Details - {{selected.name}}
					</a>
				</h3>
			</div>
			<div id="collapseOne" class="panel-collapse collapse in  tab-content">
				<div class="tab-pane fade in" id="info" ng-class="{'active':data.tab===1}">
					<form data-parsley-validate="true" name="employee">
						<div id="wizard">
							<ol>
								<li>
									Information
									<small>Name, Address etc</small>
								</li>
								<li>
									Employment
									<small>Details</small>
								</li>
								<li>
									Payroll
									<small>Payroll processing details</small>
								</li>
								<li>
									Taxation
									<small>Federal and State details</small>
								</li>
							</ol>
							<!-- begin wizard step-1 -->
							<div class="wizard-step-1">
								<fieldset>
									<legend class="width-full">Contact</legend>
									<!-- begin row -->
									<div class="row">
										<contact data="selected.contact" sourcetypeid="data.sourceTypeId" sourceid="selected.id" type="0" val-group="'wizard-step-1'" show-primary="false" />
									</div>
									<div class="row">
										<div class="col-sm-4">
											<div class="form-group">
												<label>Gender</label>
												<select ng-model="selected.gender" name="gender" class="form-control" convert-to-number required data-parsley-group="wizard-step-1" data-parsley-type="number">
													<option value="0">NA</option>
													<option value="1">Male</option>
													<option value="2">Female</option>
												</select>
											</div>
										</div>
										<div class="col-sm-4">
											<label>SSN </label>
											<div class="form-group input-group">
												<input type="text" name="ssn" class="form-control" ng-model="selected.ssn" ui-mask="899-99-9999" required data-parsley-group="wizard-step-1" />
												<span class="btn btn-primary input-group-addon" ng-disabled="!selected.ssn" ng-click="checkSSN()" ng-show="data.showSSN"><i class="fa fa-eye"></i></span>
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label class="control-label">Birth Date</label>
												<date-ctrl name="birthdate" required="false" model="selected.birthDate" disabled="false" />

											</div>
										</div>
									</div>
								</fieldset>
								
							</div>
							<!-- end wizard step-1 -->
							<!-- begin wizard step-2 -->
							<div class="wizard-step-2">
								
								<fieldset>
									<legend class="width-full">Employment</legend>
									<!-- begin row -->

									<div class="row">
										<div class="col-sm-2">
											<div class="form-group">
												<label class="control-label">Hire Date</label>
												<date-ctrl name="'hiredate'" required="true" model="selected.hireDate" disabled="false" />

											</div>
										</div>
										<div class="col-sm-2">
											<div class="form-group">
												<label class="control-label">Termination Date</label>
												<date-ctrl name="'terminationdate'" model="selected.terminationDate" disabled="false" />

											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>Department</label>
												<input type="text" name="deartment" placeholder="Department" class="form-control" ng-model="selected.department" />
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>Status</label>
												<select ng-model="selected.statusId" name="status" class="form-control" convert-to-number>
													<option value="1">Active</option>
													<option value="3">Terminated</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-2">
											<div class="form-group">
												<label class="control-label">Sick Leave Hire Date</label>
												<date-ctrl name="'sickleavehiredate'" required="true" model="selected.sickLeaveHireDate" disabled="false" />

											</div>
										</div>
										<div class="col-sm-2">
											<div class="form-group" ng-hide="!selected.id">
												<label>SL Carry Over</label>
												<input type="text" name="slco" placeholder="Carry Over" class="form-control" ng-model="selected.carryOver" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" convert-to-decimal />
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>Memo</label>
												<input type="text" name="memo" placeholder="memo" class="form-control" ng-model="selected.memo" />
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>W/C Job Class </label>
												<select class="form-control" ng-model="selected.workerCompensation" ng-options="wc.code + '-' + wc.description for wc in mainData.selectedCompany.workerCompensations | orderBy:'id' track by wc.id" data-parsley-group="wizard-step-2" ng-required="mainData.selectedCompany.workerCompensations.length>0">
													<option value="">Please select...</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-2">
											<div class="form-group" ng-hide="!selected.id">
												<label>Employee No</label>
												<input type="text" name="empno" placeholder="Employee No" class="form-control" ng-model="selected.employeeNo" ng-disabled="true" />
											</div>
										</div>
										<div class="col-sm-2">
											<div class="form-group">
												<label>Employee No (Company)</label>
												<input type="text" name="empno1" placeholder="Employee No" class="form-control" ng-model="selected.companyEmployeeNo" />
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>Internal Notes</label>
												<input type="text" name="memo" placeholder="notes" class="form-control" ng-model="selected.notes" />
											</div>
										</div>
										<div class="col-sm-4">
											<div class="form-group">
												<label>Clock Id</label>
												<input type="text" name="clockid" placeholder="Clock Id" class="form-control" ng-model="selected.clockId" />
											</div>
										</div>

									</div>
									
								</fieldset>
							</div>
							<!-- end wizard step-2 -->
							<!-- begin wizard step-3 -->
							<div class="wizard-step-3">
								<fieldset>
									<legend class="width-full">Payroll</legend>
									<!-- begin row -->
									<div class="row" style="min-height:300px">
										<!-- begin col-6 -->
										<div class="col-sm-4">
											<div class="form-group">
												<label>Payroll Schedule</label>
												<select ng-model="selected.payrollSchedule" name="scheuled" class="form-control" data-parsley-group="wizard-step-3" required convert-to-number data-parsley-type="number">
													<option value="1">Weekly</option>
													<option value="2">Bi-Weekly</option>
													<option value="3">Semi-Monthly</option>
													<option value="4">Monthly</option>

												</select>
											</div>

											<div class="form-group">
												<label for="comps">Recurring Compensation(s)</label><i class="fa fa-plus-circle fa-lg" ng-show="availablePayTypes().length>0" ng-click="addPayType()"></i>
												<div class="col-sm-12" ng-show="selected.compensations.length>0" ng-if="selected.compensations">
													<table class="table table-header table-bordered table-condensed form-controls input-sm">
														<thead>
															<tr>
																<td class="col-sm-6">Pay Type</td>
																<td class="col-sm-4">Amount</td>
																<td class="col-sm-2"></td>

															</tr>
														</thead>
														<tbody>
															<tr ng-repeat="item in selected.compensations track by $index">
																<td>
																	<select name="pt1{{$index}}" id="pt1{{$index}}" class="form-control" ng-change="updatePayTypeUsed(item)" ng-model="item.payType" ng-disabled="!item.isNew" ng-options="st.description for st in payTypeList(item) | orderBy:'id' track by st.id" required data-parsley-group="wizard-step-3">
																		<option value="">Please select...</option>
																	</select>
																</td>
																<td>
																	<input name="a1{{$index}}" id="at1{{$index}}" type="number" ng-model="item.amount" class="form-control" required data-parsley-group="wizard-step-3" data-parsley-type="number" data-parsley-min="0" />
																</td>
																<td>
																	<i class="fa fa-remove fa-lg" ng-click="cancel1($index)"></i>
																</td>
															</tr>
														</tbody>
													</table>




												</div>

											</div>
											<div class="form-group" ng-if="showAccruals()">
												<label for="payTypeAccruals">Accrual(s)</label>
												<div name="payTypeAccruals" ng-dropdown-multiselect="" options="data.accrualPayTypes" extra-settings="{displayProp: 'name', idProp: 'id', showCheckAll: true, showUncheckAll: true ,scrollable: true, scrollableHeight: 220, buttonClasses:'btn btn-sm btn-default'}" selected-model="selectedAccruals" events="accrualEvents" required data-parsley-group="wizard-step-3"></div>

											</div>
										</div>

										<div class="col-sm-4">
											<div class="form-group">
												<label>Pay Type</label>
												<select ng-model="selected.payType" name="paytype" class="form-control" ng-change="payTypeChanged()" convert-to-number required data-parsley-group="wizard-step-3" data-parsley-type="number">
													<option value="1">Hourly</option>
													<option value="2">Salary</option>
													<option value="3">Piece-work</option>
													<option value="4">Job Cost</option>
												</select>
											</div>
											<div class="form-group">
												<label>Payment Method</label>
												<select ng-model="selected.paymentMethod" name="method" class="form-control" data-parsley-group="wizard-step-3" required convert-to-number data-parsley-type="number">
													<option value="1">Check</option>
													<option value="2" ng-show="mainData.selectedCompany.directDebitPayer">Direct Deposit</option>
													<option value="3" ng-show="mainData.selectedCompany.profitStarsPayer">Direct Deposit - ProfitStars</option>
												</select>
											</div>
											<div class="row" ng-if="selected.paymentMethod>1">
												<div class="form-group">
													<label></label>
													<div>
														<label for="ddauth" class="switch">
															DD Authorization availble with company?
															<input id="ddauth" type="checkbox" ng-model="selected.directDebitAuthorized" /><i></i>
														</label>
													</div>
												</div>
												<div class="col-sm-12">
													<table class="table table-header table-bordered table-condensed form-controls input-sm">
														<thead>
															<tr>
																<td class="col-sm-7">Bank Details</td>
																<td class="col-sm-3">%age</td>
																<td class="col-sm-2"></td>
															</tr>
														</thead>
														<tbody>
															<tr ng-repeat="bank in selected.bankAccounts track by $index">
																<td>
																	<span ng-show="!selectedBank || selectedBankIndex!==$index">
																		{{ bank.bankAccount? bank.bankAccount.bankName : '' }}
																	</span>
																	<div class="row" ng-if="selectedBank && selectedBankIndex===$index">
																		<div class="form-group">
																			<label>Bank Name</label>
																			<input type="text" required ng-model="selectedBank.bankAccount.bankName" class="form-control" />
																		</div>

																		<div class="form-group">
																			<label>Account type</label>
																			<div>
																				<select ng-model="selectedBank.bankAccount.accountType" name="accountType" class="form-control" convert-to-number>
																					<option value="1">Checking</option>
																					<option value="2">Savings</option>

																				</select>

																			</div>

																		</div>
																		<div class="form-group">
																			<label>Routing Number</label>
																			<div>
																				<input type="text" class="form-control" ng-pattern="/^[0-9]{9}$/" name="routingnumber" ui-mask="999999999" ng-model="selectedBank.bankAccount.routingNumber" ng-class="{'has-error':!validateRoutingNumber(selectedBank.bankAccount.routingNumber)}" />

																			</div>
																		</div>
																		<div class="form-group">
																			<label>Account Number</label>
																			<div>
																				<input type="text" class="form-control" placeholder="Account Number between 8-17 numbers" name="accountnumber" ng-model="selectedBank.bankAccount.accountNumber" ng-pattern="/^\d{8,17}$/" />

																			</div>
																		</div>
																		<div class="form-group">
																			<label>Fraction Id</label>
																			<div>
																				<input type="text" class="form-control" placeholder="Fraction Id" name="accountnumber" ng-model="selectedBank.bankAccount.fractionId" />

																			</div>
																		</div>
																	</div>
																</td>
																<td>
																	<!-- editable comment (text with validation) -->
																	<span ng-show="!selectedBank || selectedBankIndex!==$index">
																		{{ bank.percentage | currency }}%
																	</span>
																	<input type="number" class="form-control" ng-model="selectedBank.percentage" ng-show="selectedBank && selectedBankIndex===$index" step="0.01" ng-max="100" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" />
																</td>

																<td style="white-space: nowrap">
																	<!-- form -->

																	<button type="button" ng-show="!selectedBank || selectedBankIndex!==$index" class="btn btn-success btn-sm btn-icon btn-circle" ng-click="setSelectedBank($index)">
																		<i class="fa fa-edit"></i>
																	</button>
																	<button type="button" ng-show="!selectedBank || selectedBankIndex!==$index" class="btn btn-danger btn-sm  btn-icon btn-circle" ng-click="delete($index)">
																		<i class="fa fa-remove"></i>
																	</button>
																	<button type="button" ng-disabled="!isbankValid()" ng-show="selectedBank && selectedBankIndex===$index" ng-click="saveBank()" ng class="btn btn-success btn-sm btn-icon btn-circle">
																		<i class="fa fa-save"></i>
																	</button>
																	<button type="button" ng-show="selectedBank && selectedBankIndex===$index" ng-click="cancelBank($index)" class="btn btn-default btn-sm btn-icon btn-circle">
																		<i class="fa fa-backward"></i>
																	</button>

																</td>

															</tr>
															<tr ng-show="!selectedBank">
																<td colspan="2">
																	<span ng-show="selected.bankAccounts.length===0">No Banks set up</span>
																</td>

																<td>
																	<button type="button" ng-click="addBankAccount()" ng-show="ddPercentageAvailable()>0" class="btn btn-primary">
																		Add
																	</button>
																</td>
															</tr>

														</tbody>
													</table>
												</div>

											</div>

										</div>

										<div class="col-sm-4" ng-if="selected.payType">
											<div class="form-group" ng-if="selected.payType!==3">
												<label>{{selected.payType===1 ? 'Base Hourly Rate' : 'Salary $'}}</label>
												<input id="rate" class="form-control" ng-model="selected.rate" required data-parsley-group="wizard-step-3" style="width:10em;" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-trigger="blur" step="0.01" min="0" />{{selected.payType===1? ' per hour' : ' per pay schedule'}}

											</div>

											<div class="form-group" ng-if="selected.payType===1">
												<label for="paycodes">Pay Rate(s)</label>
												<div ng-dropdown-multiselect="" options="data.payCodes" extra-settings="{displayProp: 'dropDownDisplay', idProp: 'id', showCheckAll: true, showUncheckAll: true ,scrollable: true, scrollableHeight: 220, buttonClasses:'btn btn-sm btn-default'}" selected-model="selectedPayCodes" events="payCodeEvents" required data-parsley-group="wizard-step-3"></div>

											</div>
											<div class="form-group" ng-if="mainData.selectedCompany.isRestaurant && selected.payType===1">
												<label></label>
												<div>
													<label for="istipped" class="switch">
														Tipped ?
														<input id="istipped" type="checkbox" ng-model="selected.isTipped" /><i></i>
													</label>
												</div>
											</div>

										</div>

									</div>

									<!-- end row -->
								</fieldset>
							</div>
							<!-- end wizard step-3 -->
							<!-- begin wizard step-4 -->
							<div class="wizard-step-4">
								<fieldset>
									<legend class="width-full">Taxation</legend>
									<!-- begin row -->
									<div class="row">
										<div class="col-sm-4">
											<div class="form-group">
												<label>Tax Status</label>
												<select ng-model="selected.taxCategory" name="category" class="form-control" required data-parsley-group="wizard-step-4" convert-to-number data-parsley-type="number">
													<option value="1">US Worker non-visa</option>
													<option value="2">Non Immigrant Alien (H1, F1, J1,)</option>
													<option value="3">Clergy (only FIT & SIT)</option>
												</select>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-3">
											<div class="form-group">
												<label>Federal Filing Status</label>
												<select ng-model="selected.federalStatus" name="fstatus" class="form-control" required data-parsley-group="wizard-step-4" convert-to-number data-parsley-type="number">
													<option value="1">Single</option>
													<option value="2">Married</option>
													<option value="3">Unmarried Head of Household</option>
												</select>
											</div>

										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>Federal Exemptions (* Pre 2020)</label>
												<select ng-model="selected.federalExemptions" name="fstatus" class="form-control" required data-parsley-group="wizard-step-4" convert-to-number data-parsley-type="number" ng-disabled="selected.useW4Fields">
													<option value="0">0</option>
													<option value="1">1</option>
													<option value="2">2</option>
													<option value="3">3</option>
													<option value="4">4</option>
													<option value="5">5</option>
													<option value="6">6</option>
													<option value="7">7</option>
													<option value="8">8</option>
													<option value="9">9</option>
													<option value="10">10 or more</option>
												</select>
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>Federal Additional Amount (* Pre 2020)</label>
												<input name="faddamount" ng-disabled="selected.useW4Fields" placeholder="Federal Additional Amount" class="form-control" ng-model="selected.federalAdditionalAmount" required data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>
										<div class="col-sm-3 form-group">
											Use W-4 Fields?
											<label for="usew4" class="switch">

												<input id="usew4" type="checkbox" ng-model="selected.useW4Fields" /><i></i>
											</label>
										</div>
									</div>
									<div class="row" ng-show="selected.useW4Fields">
										<div class="col-sm-3">
											<div class="form-group">
												<label>W4 - Dependent Children under 17y (3a)</label>
												<input name="dedchi" class="form-control" ng-model="selected.dependentChildren" data-parsley-pattern="/^[0-9]?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>W4 - Other Dependent(s) (3b)</label>
												<input name="dedother" class="form-control" ng-model="selected.otherDependent" data-parsley-pattern="/^[0-9]?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>
										<div class="col-sm-3">

										</div>
										<div class="col-sm-3">
											W4 - Multiple Jobs?
											<label for="mjs" class="switch">
												<input id="mjs" type="checkbox" ng-model="selected.multipleJobs" /><i></i>
											</label>
										</div>
									</div>
									<div class="row" ng-show="selected.useW4Fields">
										<div class="col-sm-3">
											<div class="form-group">
												<label>W4 - Other Income (4a)</label>
												<input name="otherincome" class="form-control" ng-model="selected.otherIncome" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>W4 - Extra Deductions (4b)</label>
												<input name="extradeds" class="form-control" ng-model="selected.federalDeductions" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>W4 - Additional Withholding (4c)</label>
												<input name="addwith" class="form-control" ng-model="selected.federalAdditionalWithholding" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>
										</div>

										<div class="col-sm-3">

										</div>
									</div>
									<div class="row">
										<div class="col-sm-3">
											<div class="form-group">
												<label>State</label>
												<div>
													<select id="state" class="form-control" ng-model="selected.state.state" ng-options="st.stateName for st in data.companyStates track by st.stateId" required data-parsley-group="wizard-step-4"></select>
												</div>
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>State Filing Status</label>
												<select ng-model="selected.state.taxStatus" name="sstatus" class="form-control" required data-parsley-group="wizard-step-4" convert-to-number data-parsley-type="number">
													<option value="1">Single</option>
													<option value="2">Married</option>
													<option value="3">Unmarried Head of Household</option>
												</select>
											</div>

										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>Exemptions</label>
												<select ng-model="selected.state.exemptions" name="fstatus" class="form-control" required data-parsley-group="wizard-step-4" convert-to-number data-parsley-type="number">
													<option value="0">0</option>
													<option value="1">1</option>
													<option value="2">2</option>
													<option value="3">3</option>
													<option value="4">4</option>
													<option value="5">5</option>
													<option value="6">6</option>
													<option value="7">7</option>
													<option value="8">8</option>
													<option value="9">9</option>
													<option value="10">10 or more</option>
												</select>
											</div>

										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label>Additional Amout</label>
												<input name="addamount" placeholder="Federal Additional Amount" class="form-control" ng-model="selected.state.additionalAmount" required data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" data-parsley-type="number" data-parsley-group="wizard-step-4" />
											</div>

										</div>
									</div>
									<!-- end row -->
								</fieldset>


							</div>

						</div>
						<div class="col-sm-4 col-sm-offset-4" ng-show="showControls">
							<button class="btn btn-lg btn-success btn-icon btn-circle" ng-click="save()" ng-disabled="!validate()"><i class="fa fa-save"></i></button>
							<button class="btn btn-lg btn-default btn-icon btn-circle" ng-click="cancel()"><i class="fa fa-remove"></i></button>
						</div>
					</form>
				</div>
				<div class="tab-pane fade in" id="versions" ng-if="selected.id && !isPopup && data.tab===6" ng-class="{'active':data.tab===6}">
					<memento-list main-data="mainData" source-type-id="data.sourceTypeId" memento-id="selected.id" heading="'Employee Versions'" />
				</div>
				<div class="tab-pane fade in" id="docs" ng-if="selected.id && !isPopup && data.tab===5" ng-class="{'active':data.tab===5}">
					<document-list main-data="mainData" source-type-id="3" heading="'Employee Documents'" mode="2" company-id="mainData.selectedCompany.id" employee-id="selected.id" />
				</div>
				<div class="tab-pane fade in" id="docs" ng-if="selected.id && !isPopup && data.tab===4" ng-class="{'active':data.tab===4}">
					<employee-dashboard main-data="data" company-id="selected.companyId" employee-id="selected.id" show-panel-title="false" />
				</div>
			</div>
		</div>



		<div class="panel panel-inverse overflow-hidden" ng-if="selected.id && !isPopup && data.employeeMetaData">
			<div class="panel-heading">
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#collapseTwo">
						<i class="fa fa-plus-circle pull-right"></i>Employee Deductions
					</a>
				</h3>
			</div>
			<div id="collapseTwo" class="panel-collapse collapse">
				<div class="panel-body">
					<employee-deduction-list list="selected.deductions" employee-id="selected.id" company-deductions="mainData.selectedCompany.deductions" save-to-server="true" show-controls="showControls && data.editableDeductions" agencies="data.employeeMetaData.agencies" />
				</div>
			</div>
		</div>

		<div class="panel panel-inverse overflow-hidden" ng-if="selected.id && !isPopup">
			<div class="panel-heading">
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#collapseThree">
						<i class="fa fa-plus-circle pull-right"></i>
						Accumulations
					</a>

				</h3>
			</div>
			<div id="collapseThree" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="row">
						<div class="col-sm-6 col-md-3" ng-repeat="ag in selected.accumulationGroups" ng-init="parentIndex = $index">
							<div class="widget widget-stats m-b-0" ng-class="{'bg-black': ag.key.payTypeId===6, 'bg-blue': ag.key.payTypeId===5, 'bg-grey': ag.key.payTypeId===16}">
								<div class="stats-icon stats-icon-lg"><i class="fa fa-caret-left fa-fw"></i></div>
								<div class="stats-title">{{ag.key.payTypeName}}</div>
								<div class="stats-desc">Available</div>
								<div class="stats-number">{{calculateAvailableWage(ag.key) | currency:'$'}} for {{ag.key.available | currency:''}} hrs.</div>
								<div class="stats-desc">Accumulated - Used - CarryOver</div>
								<div class="stats-number">{{ag.key.ytdFiscal | currency:''}} hrs. - {{ag.key.ytdUsed | currency:''}} hrs. - {{ag.key.carryOver | currency:''}} hrs.</div>
								<div class="stats-progress progress">
									<div class="progress-bar" style="width: 100%;"></div>
								</div>
								<div class="stats-desc" ng-show="showControls">
									<!--<i class="fa fa-undo fa-lg pull-right" ng-show="selectedAccumulation && selectedAccumulationIndex===parentIndex" ng-click="cancelAccumulation(ag)"></i>
								<i class="fa fa-eye fa-lg pull-right" ng-show="!selectedAccumulation || selectedAccumulationIndex!==parentIndex" ng-click="setSelectedAccumulation(ag, $index)"></i>-->
									<i class="fa fa-download fa-lg pull-left" ng-click="getCompanyLeaveExport(1, ag.key)"></i>
								</div>
							</div>
							<div class="widget widget-stats m-t-0"
								 ng-class="{'border-black': ag.key.payTypeId===6, 'border-blue': ag.key.payTypeId===5, 'border-grey': ag.key.payTypeId===16}">
								<div class="stats-desc" ng-repeat="acc in ag.value track by $index">
									<div class="form-group">
										<label class="control-label">
											<i class="fa fa-lg" ng-click="setSelAcc(acc, $index)" ng-class="{'fa-arrow-circle-down': selAccIndex===$index, 'fa-arrow-circle-right': selAccIndex!==$index}"></i> {{acc.fiscalStart | date:'MM/dd/yyyy'}} - {{acc.fiscalEnd | date:'MM/dd/yyyy'}} : {{calculateAvailableWage(acc) | currency:'$'}} for {{acc.available | currency:''}} hrs.
										</label>
									</div>
									<div class="form-group col-md-12 p-0" ng-show="selAccIndex===$index && selAcc.payTypeId===ag.key.payTypeId">
										<label class="control-label col-md-4 col-sm-4 p-0" for="rate">Cycle :</label>
										<div class="col-md-4 col-sm-4 p-0">
											<date-ctrl name="fsd" required="true" model="acc.newFiscalStart" disabled="false" />

										</div>
										<div class="col-md-4 col-sm-4 p-0">
											<date-ctrl name="fse" required="true" model="acc.newFiscalEnd" disabled="false" />
										</div>

									</div>
									<div class="form-group  col-md-12 p-0" ng-show="selAccIndex===$index && selAcc.payTypeId===ag.key.payTypeId">
										<label class="control-label col-md-4 col-sm-4 p-0" for="cao{{$index}}">CarryOver :</label>
										<div class="col-md-8 col-sm-8 p-0">
											<input name="cao{{$index}}" class="form-control" ng-model="acc.carryOver" data-parsley-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" convert-to-decimal />

										</div>


									</div>
									<div class="form-group  col-md-12 p-0" ng-show="selAccIndex===$index && selAcc.payTypeId===ag.key.payTypeId">
										<label class="control-label col-md-4 col-sm-4 p-0">Accumulation :</label>
										<div class="col-md-8 col-sm-8">
											<label class="control-label col-md-10 col-sm-10 p-0">{{acc.ytdFiscal | currency:''}} hrs</label>

										</div>


									</div>
									<div class="form-group  col-md-12 p-0" ng-show="selAccIndex===$index && selAcc.payTypeId===ag.key.payTypeId">
										<label class="control-label col-md-4 col-sm-4 p-0">Used :</label>
										<div class="col-md-8 col-sm-8 p-0">
											<label class="control-label col-md-10 col-sm-10">{{acc.ytdUsed | currency:''}} hrs</label>
										</div>


									</div>
									<div class="form-group  col-md-12 p-0" ng-show="selAccIndex===$index && selAcc.payTypeId===ag.key.payTypeId && (mainData.userRole==='Master' || mainData.userRole==='SuperUser')">
										<button class="btn btn-lg btn-icon btn-circle btn-success pull-right" ng-show="showSaveAcc(acc)" ng-click="saveEmployeeAccumulation(acc)"><i class="fa fa-save"></i></button>
									</div>

								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<!--<button class="btn btn-xs btn-danger" ng-click="getCompanySickLeaveExport(1)" ng-show="data.showSickLeaveExport || mainData.userRole==='Employee'">Sick Leave Export</button>-->
						<button class="btn btn-xs btn-success pull-right" ng-click="recalculateEmployeePayTypeAccumulations(1)" ng-show="data.showSickLeaveRecalculate && mainData.userRole!=='Employee'">Re-Calculate Accumulations</button>
					</div>
					<div class="row" ng-if="selected.accumulationGroups.length===0">
						no records found
					</div>

				</div>
			</div>
		</div>
		<div class="panel panel-inverse overflow-hidden" ng-if="selected.id && !isPopup">
			<div class="panel-heading">
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#collapseFour">
						<i class="fa fa-plus-circle pull-right"></i>
						ACA
					</a>

				</h3>
			</div>
			<div id="collapseFour" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="row">
						<table class="table table-header table-bordered table-condensed form-controls input-sm">
							<thead>
								<tr>
									<td class="col-sm-3">Year</td>
									<td class="col-sm-3">Amount</td>
									<td class="col-sm-3">Last Modified</td>
									<td class="col-sm-3" ng-show="showControls"></td>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="item in selected.employeeACAs track by $index">
									<td>
										<span editable-number="item.year" e-name="year" e-form="rowform" e-ng-change="item.year = $data" e-ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" e-ng-min="2007" e-ng-max="2030" e-step="1" e-style="width:10em;">
											{{ item.year  }}
										</span>
									</td>
									<td>
										<!-- editable comment (text with validation) -->
										<span editable-number="item.amount" e-name="amount" e-form="rowform" e-ng-change="item.amount = $data" e-ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" e-ng-min="0" e-step="0.01" e-style="width:10em;">
											{{ item.amount | currency }} 
										</span>
									</td>
									<td>
										{{ item.lastModifiedBy }}( {{ item.lastModified | date:'MM/dd/yyyy'}} )
									</td>
									<td style="white-space: nowrap" ng-show="showControls">
										<!-- form -->
										<form editable-form id="rowform" name="rowform" onbeforesave="saveACA($index)" class="form-buttons form-inline" shown="selectedACA===item">
											<button type="button" ng-show="!rowform.$visible" class="btn btn-lg btn-success btn-icon btn-circle" ng-click="rowform.$show();setSelectedACA($index)">
												<i class="fa fa-edit"></i>
											</button>
											<button type="submit" ng-disabled="rowform.$waiting || !isACAValid(item)" ng-if="rowform.$visible" class="btn btn-lg btn-success  btn-icon btn-circle">
												<i class="fa fa-save"></i>
											</button>
											<button type="button" ng-disabled="rowform.$waiting" ng-if="rowform.$visible" ng-click="rowform.$cancel();cancelACA($index)" class="btn btn-lg btn-default  btn-icon btn-circle">
												<i class="fa fa-remove"></i>
											</button>
										</form>
									</td>

								</tr>
								<tr ng-show="!selectedACA">
									<td colspan="4">
										<span ng-show="list.length===0">No items found</span>
										<button class="btn btn-success btn-lg  btn-icon btn-circle" ng-click="addACA()"><i class="fa fa-plus"></i></button>
									</td>

								</tr>

							</tbody>
						</table>
					</div>

				

				</div>
			</div>
		</div>
		<div class="panel panel-inverse overflow-hidden" ng-if="selected.id && !isPopup && (mainData.userRole==='Employee' || data.viewReports)">
			<div class="panel-heading">
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion" data-target="#collapseFive">
						<i class="fa fa-plus-circle pull-right"></i>
						Reports
					</a>
				</h3>
			</div>
			<div id="collapseFive" class="panel-collapse collapse">
				<div class="panel-body">

					<div class="col-sm-12">
						<div class="col-sm-12">
							<h5><i class=" fa fa-file-pdf-o fa-lg" /><span class="m-l-10"><em>Wage and Tax Statement – Form W2</em></span></h5>
						</div>
						<div class="col-sm-12">
							<div class="col-sm-3">
								<select name="yearW2" ng-model="data.filterW2.year" class="form-control" convert-to-number ng-options="year for year in data.filter.years track by year">
									<option value=""> select year</option>
								</select>
							</div>

							<div class="col-sm-2 form-group">

								<label for="w2history" class="switch">
									Include History?
									<input id="w2history" type="checkbox" ng-model="data.filterW2.includeHistory" /><i></i>
								</label>

							</div>
							<div class="col-sm-2 form-group" ng-if="showincludeclients">

								<label for="fw2clients" class="switch">
									Include Clients/locations?
									<input id="fw2clients" type="checkbox" ng-model="data.filterW2.includeClients" /><i></i>
								</label>

							</div>
							<div class="col-sm-2 form-group">



							</div>
							<div class="col-sm-2">
								<button class="btn btn-xs btn-primary" ng-click="getReportW2Employee()" ng-disabled="!data.filterW2.year">W2 - Employee</button>

							</div>

						</div>

					</div>


					<div class="col-sm-12" ng-if="mainData.selectedCompany.isFiler1095">
						<div class="col-sm-12">
							<h5><i class=" fa fa-file-pdf-o fa-lg" /><span class="m-l-10"><em>Medical Obamacare – Form 1095-C</em></span></h5>
						</div>
						<div class="col-sm-12">
							<div class="col-sm-3">
								<select name="yearC1095" ng-model="data.filterC1095.year" class="form-control" convert-to-number ng-options="year for year in data.filter.years track by year">
									<option value=""> select year</option>
								</select>
							</div>

							<div class="col-sm-2 form-group">

								<label for="c1095history" class="switch">
									Include History?
									<input id="c1095history" type="checkbox" ng-model="data.filterC1095.includeHistory" /><i></i>
								</label>

							</div>
							<div class="col-sm-2 form-group" ng-if="showincludeclients">

								<label for="fc1095clients" class="switch">
									Include Clients/locations?
									<input id="fc1095clients" type="checkbox" ng-model="data.filterC1095.includeClients" /><i></i>
								</label>

							</div>
							<div class="col-sm-2 form-group">



							</div>
							<div class="col-sm-2">
								<button class="btn btn-xs btn-primary" ng-click="getReportC1095()" ng-disabled="!data.filterC1095.year">Display 1095-C</button>
							</div>

						</div>

					</div>

					<div class="col-sm-12">
						<div class="col-sm-12">
							<h5><i class=" fa fa-file-excel-o fa-lg" /><span class="m-l-10"><em>Payroll Summary for year</em></span></h5>
						</div>
						<div class="col-sm-12">
							<div class="col-sm-3">
								<select name="yearC1095" ng-model="data.payrollSummary.year" class="form-control" convert-to-number ng-options="year for year in data.filter.years track by year">
									<option value=""> select year</option>
								</select>
							</div>

							<div class="col-sm-2 form-group">

								<label for="payrollsummaryhistory" class="switch">
									Include History?
									<input id="payrollsummaryhistory" type="checkbox" ng-model="data.payrollSummary.includeHistory" /><i></i>
								</label>

							</div>
							<div class="col-sm-2 form-group">

								<label for="payrollsummarytaxdelayed" class="switch" ng-show="mainData.userRole==='SuperUser' || mainData.userRole==='Master'">
									Include Tax Delayed?
									<input id="payrollsummarytaxdelayed" type="checkbox" ng-model="data.payrollSummary.includeTaxDelayed" /><i></i>
								</label>

							</div>

							<div class="col-sm-2">
								<button class="btn btn-xs btn-primary" ng-click="getReportPayrollSummary()" ng-disabled="!data.payrollSummary.year">Show</button>
								<button class="btn btn-xs btn-primary" ng-click="fixEmployeeYTD()" ng-show="selected.id && mainData.userRole==='SuperUser'">Fix Employee YTD</button>
							</div>

						</div>
						<div class="col-sm-12" ng-if="data.payrollSummaryReport">
							<table class="table table-condensed table-bordered col-sm-12">
								<thead>
									<tr>
										<th class="col-sm-2 text-center">Employee</th>
										<th class="col-sm-1 text-center">Wage Type</th>
										<th class="col-sm-1 text-center">Total Wages</th>
										<th class="col-sm-1 text-center">Taxes</th>
										<th class="col-sm-1 text-center">Wage</th>
										<th class="col-sm-1 text-center">Tax</th>
										<th class="col-sm-1 text-center">Deduction</th>
										<th class="col-sm-1 text-center">Amount</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="pc in data.payrollSummaryReport.employeeAccumulationList">
										<td>
											<div id="pc.id" ng-model="pc" ng-include="'employee.html'" class="row"></div>
											<!--<div class="row" ng-include="'paytype.html'" ng-repeat="pt in pc" id="pt.id"></div>-->
										</td>
										<td colspan="2">
											<div ng-model="pc" ng-include="'wages.html'" class="row"></div>
										</td>
										<td colspan="3">
											<div class="col-sm-12"><strong>Employee:</strong></div>
											<div class="col-sm-12" ng-include="'tax.html'" ng-repeat="tax in pc.taxes | filter:{isEmployeeTax:true} | orderBy:'tax.id'"></div>
											<div class="col-sm-12">
												<div class="col-sm-4 col-sm-offset-4">
													<strong><em>Total:       {{pc.employeeTaxes | currency:'$'}}</em></strong>
												</div>
											</div>
											<div class="col-sm-12"><strong>Employer:</strong></div>
											<div class="col-sm-12" ng-include="'tax.html'" ng-repeat="tax in pc.taxes | filter:{isEmployeeTax:false} | orderBy:'tax.id'"></div>
											<div class="col-sm-12">
												<div class="col-sm-4 col-sm-offset-4">
													<strong><em>Total:       {{pc.employerTaxes | currency:'$'}}</em></strong>
												</div>
											</div>
										</td>
										<td colspan="2">
											<div ng-repeat="ded in pc.deductions" ng-include="'ded.html'" class="row"></div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

					</div>

				</div>
			</div>
		</div>
	</div>
	

</div>
