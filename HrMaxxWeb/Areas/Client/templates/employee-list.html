<div class="row" ng-show="mainData.selectedHost">
	<!-- begin panel -->
	<div class="panel panel-inverse" data-sortable-id="form-stuff-4" ng-if="mainData.selectedCompany">
		<div class="panel-heading" ng-click="data.isBodyOpen=!data.isBodyOpen">
			<h4 class="panel-title">Employees<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': data.isBodyOpen, 'glyphicon-chevron-right': !data.isBodyOpen}"></i></h4>

		</div>
		<div class="panel-body" ng-show="data.isBodyOpen">
			<div ng-show="list.length===0 && !selectedContact" class="table table-bordered">
				No Employees found
			</div>
			<div class="row" ng-show="list.length>0">
				<table ng-table="tableParams" class="table" show-filter="true" template-pagination="custom/pager">
					<tr ng-repeat="item in tableData track by $index" class="mouse-over-pointer" ng-click="set(item)" ng-class="{'success':selected.id===item.id}">
						<td data-title="' No'" filter="{ 'name': 'text' }" sortable=" 'name' " class="col-sm-1">
							{{item.employeeNo}}
						</td>
						<td data-title=" 'Name' " filter="{ 'name': 'text' }" sortable=" 'name' " class="col-sm-3">
							{{item.name}}
						</td>
						<td data-title=" 'SSN' " filter="{ 'ssn': 'text' }" sortable=" 'ssn' " class="col-sm-2">
							{{item.ssn}}
						</td>
						<td data-title=" 'Department' " filter="{ 'department': 'text' }" sortable=" 'department' " class="col-sm-2">
							{{item.department}}
						</td>
						<td data-title=" 'Hire Date' " filter="{ 'hireDate': 'text' }" sortable=" 'hireDaate' " class="col-sm-2">
							{{item.hireDate | date:'MM/dd/yyyy'}}
						</td>
						<td data-title=" 'Last Payroll' " sortable=" 'lastPayrollDate' " class="col-sm-1">
							{{item.lastPayrollDate | date:'MM/dd/yyyy'}}
						</td>
						<td data-title=" 'Status' " filter="{ 'statusText': 'text' }" sortable=" 'statusText' " class="col-sm-1">
							{{item.statusText}}
						</td>
						
					</tr>

				</table>
				<script type="text/ng-template" id="custom/pager">
					<ul class="pager ng-cloak">
						<li ng-repeat="page in pages"
								ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
								ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
							<a ng-switch-when="prev" ng-click="params.page(page.number)" href="" class="marginned">&laquo; Previous</a>
							<a ng-switch-when="next" ng-click="params.page(page.number)" href="" class="marginned">Next &raquo;</a>
						</li>
						<li>
							<div class="btn-group">
								<button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default btn-sm">10</button>
								<button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default btn-sm">25</button>
								<button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default btn-sm">50</button>
								<button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default btn-sm">100</button>
							</div>
						</li>
					</ul>
				</script>
			</div>
			<div class="row">
				<button class="btn btn-sm btn-primary" ng-show="mainData.selectedCompany && !selected" ng-click="add()">Add</button>
			</div>

			<!-- end panel -->
		</div>
	</div>


	<div class="panel-group" id="accordion" ng-if="selected">
		<div class="panel panel-inverse overflow-hidden">
			<div class="panel-heading">
				<i class="fa fa-plus-circle pull-right"></i>
				<h3 class="panel-title">
					<a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion" href="\#collapseOne">

						Employee Details
					</a>
				</h3>
			</div>
			<div id="collapseOne" class="panel-collapse collapse in">
				<div class="panel-body">
					<div class="panel-body tab-content">
						
							<form data-parsley-validate="true" name="employee">
								<div id="wizard">
									<ol>
										<li>
											Information
											<small>Name, Address etc</small>
										</li>
										<li>
											Payroll
											<small>Payroll processing details</small>
										</li>
										<li>
											Taxation
											<small>Taxation Address and Federal and State details</small>
										</li>
									</ol>
									<!-- begin wizard step-1 -->
									<div class="wizard-step-1">
										<fieldset>
											<legend class="pull-left width-full">Contact</legend>
											<!-- begin row -->
											<div class="row">
												<contact data="selected.contact" sourcetypeid="data.sourceTypeId" sourceid="selected.id" type="0" val-group="'wizard-step-1'" />
											</div>
											<div class="row">
												<div class="col-sm-4">
													<div class="form-group">
														<label>Gender</label>
														<select ng-model="selected.gender" name="gender" class="form-control" convert-to-number required data-parsley-group="wizard-step-1">
															<option value="1">Male</option>
															<option value="2">Female</option>
														</select>
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>SSN</label>
														<input type="text" name="ssn" class="form-control" ng-model="selected.ssn" ui-mask="999-99-9999" required data-parsley-group="wizard-step-1" />
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label class="control-label">Birth Date</label>
														<date-ctrl name="birthdate" required="false" model="selected.birthDate" disabled="false" />
														
													</div>
												</div>
											</div>
										</fieldset>
										<fieldset>
											<legend class="pull-left width-full">Employment</legend>
											<!-- begin row -->
											
											<div class="row">
												<div class="col-sm-4">
													<div class="form-group">
														<label class="control-label">Hire Date</label>
														<date-ctrl name="hiredate" required="true" model="selected.hireDate" disabled="false" />
														
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Department</label>
														<input type="text" name="deartment" placeholder="Department" class="form-control" ng-model="selected.department" />
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Status</label>
														<select ng-model="selected.statusId" name="status" class="form-control" convert-to-number>
															<option value="1">Acive</option>
															<option value="2">InAcive</option>
															<option value="3">Terminated</option>
														</select>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-sm-4">
													<div class="form-group">
														<label>Employee No</label>
														<input type="text" name="empno" placeholder="Employee No" class="form-control" ng-model="selected.employeeNo" />
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Memo</label>
														<input type="text" name="memo" placeholder="memo" class="form-control" ng-model="selected.memo" />
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>W/C Job Class </label>
														<select class="form-control" ng-model="selected.workerCompensation" ng-options="wc.code for wc in mainData.selectedCompany.workerCompensations | orderBy:'id' track by wc.id">
															<option value="">Please select...</option>
														</select>
													</div>
												</div>
											</div>
										</fieldset>
									</div>
									<!-- end wizard step-1 -->
									<!-- begin wizard step-2 -->
									<div class="wizard-step-2">
										<fieldset>
											<legend class="pull-left width-full">Payroll</legend>
											<!-- begin row -->
											<div class="row">
												<!-- begin col-6 -->
												<div class="col-sm-4">
													<div class="form-group">
														<label>Payroll Schedule</label>
														<select ng-model="selected.payrollSchedule" name="scheuled" class="form-control" data-parsley-group="wizard-step-2" required convert-to-number>
															<option value="1">Weekly</option>
															<option value="2">Bi-Weekly</option>
															<option value="3">Semi-Monthly</option>
															<option value="4">Monthly</option>

														</select>
													</div>
													<div class="form-group">
														<label for="comps">Recurring Compensation(s)</label><i class="fa fa-plus-circle fa-lg" ng-show="availablePayTypes().length>0" ng-click="addPayType()"></i>
														<div class="col-sm-12" ng-show="selected.compensations.length>0" ng-if="selected.compensations">
															<table class="table table-header table-bordered table-condensed form-controls input-sm">
																<thead>
																	<tr>
																		<td class="col-sm-6">Pay Type</td>
																		<td class="col-sm-4">Amount</td>
																		<td class="col-sm-2"></td>
																		
																	</tr>
																</thead>
																<tbody>
																	<tr ng-repeat="item in selected.compensations track by $index">
																		<td>
																			<select name="pt1{{$index}}" id="pt1{{$index}}" class="form-control" ng-change="updatePayTypeUsed(item)" ng-model="item.payType" ng-disabled="!item.isNew" ng-options="st.description for st in payTypeList(item) | orderBy:'id' track by st.id" required data-parsley-group="wizard-step-3">
																				<option value="">Please select...</option>
																			</select>
																		</td>
																		<td>
																			<input name="a1{{$index}}" id="at1{{$index}}" type="number" ng-model="item.amount" class="form-control" required data-parsley-group="wizard-step-3" data-parsley-type="number" data-parsley-min="0" />
																		</td>
																		<td>
																			<i class="fa fa-remove fa-lg" ng-click="cancel1($index)"></i>
																		</td>
																	</tr>
																</tbody>
															</table>
															
															

															
														</div>

													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Pay Type</label>
														<select ng-model="selected.payType" name="paytype" class="form-control" convert-to-number required data-parsley-group="wizard-step-2">
															<option value="1">Hourly</option>
															<option value="2">Salary</option>
														</select>
													</div>
													<div class="form-group">
														<label>Payment Method</label>
														<select ng-model="selected.paymentMethod" name="method" class="form-control" data-parsley-group="wizard-step-2" required convert-to-number>
															<option value="1">Check</option>
															<option value="2">Direct Debit</option>
															
														</select>
													</div>
												</div>
												<div class="col-sm-4" ng-if="selected.payType">
													<div class="form-group" ng-if="selected.payType===2">
														<label>Salary $</label>
														<input id="rate" type="number" class="form-control" ng-model="selected.rate" required data-parsley-group="wizard-step-2" style="width:10em;" data-parsley-min="0"/>{{selected.payType===1? ' per hour' : ' per pay schedule'}}
														
													</div>
													<div class="form-group" ng-if="selected.payType===1">
														<label>Base Hourly Rate $</label>
														<input id="rate" type="number" class="form-control" ng-model="selected.rate" required data-parsley-group="wizard-step-2" style="width:10em;" data-parsley-min="0" />{{selected.payType===1? ' per hour' : ' per pay schedule'}}

													</div>
													<div class="form-group" ng-if="selected.payType===1">
														<label for="paycodes">Pay Code(s)</label>
														<div ng-dropdown-multiselect="" options="data.payCodes" extra-settings="{displayProp: 'dropDownDisplay', idProp: 'id', showCheckAll: true, showUncheckAll: true ,scrollable: true}" selected-model="selectedPayCodes" events="payCodeEvents" required></div>

													</div>
													<div class="row" ng-if="selected.paymentMethod===2">
														<div class="form-group">
															<label></label>
															<div>
																<label for="ddauth" class="switch">
																	DD Authorization availble with company?
																	<input id="ddauth" type="checkbox" ng-model="selected.directDebitAuthorized" /><i></i>
																</label>
															</div>
														</div>
														<div class="form-group">
															<label>Bank Name</label>
															<input type="text" required ng-model="selected.bankAccount.bankName" data-parsley-group="wizard-step-2" class="form-control" />
														</div>
														<div class="form-group">
															<label>Account Name</label>
															<div>
																<input type="text" class="form-control" required data-parsley-group="wizard-step-4" name="accountname" ng-model="selected.bankAccount.accountName" />

															</div>
														</div>
														<div class="form-group">
															<label>Account type</label>
															<div>
																<select ng-model="selected.bankAccount.accountType" required data-parsley-group="wizard-step-2" name="accountType" class="form-control" convert-to-number>
																	<option value="1">Checking</option>
																	<option value="2">Savings</option>

																</select>

															</div>

														</div>
														<div class="form-group">
															<label>Routing Number</label>
															<div>
																<input type="text" class="form-control" required data-parsley-group="wizard-step-2" data-parsley-pattern="/^[0-9]{9}$/" data-parsley-trigger="blur" name="routingnumber" ui-mask="999999999" ng-model="selected.bankAccount.routingNumber" ng-class="{'has-error':!validateRoutingNumber(selected.bankAccount.routingNumber)}" />

															</div>
														</div>
														<div class="form-group">
															<label>Account Number</label>
															<div>
																<input type="text" class="form-control" placeholder="Account Number between 8-15 numbers" required data-parsley-group="wizard-step-2" name="accountnumber" ng-model="selected.bankAccount.accountNumber" data-parsley-pattern="/^\d{8,15}$/" />

															</div>
														</div>
													</div>
												</div>

											</div>

											<!-- end row -->
										</fieldset>
									</div>
									<!-- end wizard step-2 -->
									<!-- begin wizard step-3 -->
									<div class="wizard-step-3">
										<fieldset>
											<legend class="pull-left width-full">Taxation</legend>
											<!-- begin row -->
											<div class="row">
												<div class="col-sm-4">
													<div class="form-group">
														<label>Tax Status</label>
														<select ng-model="selected.taxCategory" name="category" class="form-control" required data-parsley-group="wizard-step-3" convert-to-number>
															<option value="1">US Worker non-visa</option>
															<option value="2">Non Immigrant Alien (H1, F1, J1,)</option>
														</select>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-sm-4">
													<div class="form-group">
														<label>Federal Filing Status</label>
														<select ng-model="selected.federalStatus" name="fstatus" class="form-control" required data-parsley-group="wizard-step-3" convert-to-number>
															<option value="1">Single</option>
															<option value="2">Married</option>
															<option value="3">Unmarried Head of Household</option>
														</select>
													</div>
													
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Federal Exemptions</label>
														<select ng-model="selected.federalExemptions" name="fstatus" class="form-control" required data-parsley-group="wizard-step-3" convert-to-number>
															<option value="0">0</option>
															<option value="1">1</option>
															<option value="2">2</option>
															<option value="3">3</option>
															<option value="4">4</option>
															<option value="5">5</option>
															<option value="6">6</option>
															<option value="7">7</option>
															<option value="8">8</option>
															<option value="9">9</option>
															<option value="10">10 or more</option>
														</select>
													</div>
												</div>
												<div class="col-sm-4">
													<div class="form-group">
														<label>Federal Additional Amout</label>
														<input type="number" name="faddamount" placeholder="Federal Additional Amount" class="form-control" ng-model="selected.federalAdditionalAmount" data-parsley-type="number" data-parsley-group="wizard-step-3" />
													</div>
												</div>
												
											</div>
											<div class="row" >
												<div class="col-sm-3">
													<div class="form-group">
														<label>State</label>
														<div>
															<select id="state" class="form-control" ng-model="selected.state.state" ng-options="st.stateName for st in data.companyStates track by st.stateId" required data-parsley-group="wizard-step-3"></select>
														</div>
													</div>
												</div>
												<div class="col-sm-3">
													<div class="form-group">
														<label>State Filing Status</label>
														<select ng-model="selected.state.taxStatus" name="sstatus" class="form-control" required data-parsley-group="wizard-step-3" convert-to-number>
															<option value="1">Single</option>
															<option value="2">Married</option>
															<option value="3">Unmarried Head of Household</option>
														</select>
													</div>

												</div>
												<div class="col-sm-3">
													<div class="form-group">
														<label>Exemptions</label>
														<select ng-model="selected.state.exemptions" name="fstatus" class="form-control" required data-parsley-group="wizard-step-3" convert-to-number>
															<option value="0">0</option>
															<option value="1">1</option>
															<option value="2">2</option>
															<option value="3">3</option>
															<option value="4">4</option>
															<option value="5">5</option>
															<option value="6">6</option>
															<option value="7">7</option>
															<option value="8">8</option>
															<option value="9">9</option>
															<option value="10">10 or more</option>
														</select>
													</div>

												</div>
												<div class="col-sm-3" >
													<div class="form-group">
														<label>Additional Amout</label>
														<input type="number" name="addamount" placeholder="Federal Additional Amount" class="form-control" ng-model="selected.state.additionalAmount" data-parsley-type="number" data-parsley-group="wizard-step-3" />
													</div>

												</div>
											</div>
											<!-- end row -->
										</fieldset>
										
									
									</div>
									
								</div>
								<div class="col-sm-2 col-sm-offset-4">
									<button class="btn btn-primary" ng-click="save()" ng-disabled="!validate()">save</button>
									<button class="btn btn-default" ng-click="cancel()">cancel</button>
								</div>
							</form>
						
						
					</div>

				</div>
			</div>
		</div>
		

	</div>

	<div class="panel panel-inverse overflow-hidden" ng-if="selected.id">
		<div class="panel-heading">
			<h3 class="panel-title">
				<a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion" href="\#collapseTwo">
					<i class="fa fa-plus-circle pull-right"></i>Employee Deductions
				</a>
			</h3>
		</div>
		<div id="collapseTwo" class="panel-collapse collapse">
			<div class="panel-body">
				<employee-deduction-list list="selected.deductions" employee-id="selected.id" company-deductions="mainData.selectedCompany.deductions" save-to-server="true" />
			</div>
		</div>
	</div>


</div>


