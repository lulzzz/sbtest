@using HrMaxxWeb.Code.Helpers
@using Newtonsoft.Json
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <style>

        .embed-container {
            position: relative;
            padding-bottom: 45%;
            height: 0;
            overflow: hidden;
            max-width: 100%;
            min-height: 100%;
        }

            .embed-container iframe, .embed-container object, .embed-container embed {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
    </style>
    <title>@ViewBag.Title</title>

	@if (IsSectionDefined("Styles"))
	{
		@RenderSection("Styles", false)
	}
	@Styles.Render("~/bundles/site-less")


	<!--[if lt IE 9]>
		@Scripts.Render("~/bundles/html5")
	<![endif]-->
	@*@Styles.Render("~/bundles/site-less")*@
	@Scripts.Render("~/bundles/bootstrapjquery")

	@Scripts.Render("~/bundles/angular")
    <link rel="shortcut icon" href="~/Content/images/icon.png">
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>


	<!-- end #page-loader -->
	<!-- begin #page-container -->
@if (User.Identity.IsAuthenticated)
		{
	<div id="page-container" ng-controller="mainCtrl" class="fade page-sidebar-fixed page-header-fixed page-with-light-sidebar" ng-app="common" data-host="@CurrentUser.Host" data-company="@CurrentUser.Company" data-employee="@CurrentUser.Employee" data-role="@CurrentUser.Role" data-name="@CurrentUser.FullName" data-claims="@CurrentUser.GetClaimsSerialized()">
		@Html.Partial("_TopNavbar")
		

			<!-- begin #header -->
			<!-- end #header -->
			<!-- begin #sidebar -->
			@Html.Partial("_Navigation")
        <div id="content" class="content">
            <div id="page-loader1" class="fade in" ng-if="loading"><span class="spinner"></span></div>
            <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1.1','packages':['corechart']}]}"></script>
            <script type="text/ng-template" id="popover/messages.html">

                <div class="modal-body" style="padding:0px">
                    <div ng-repeat="alert in alerts" class="alert alert-{{alert.type}}" style="margin-bottom:0px">
                        <button type="button" class="close" data-ng-click="cancel()">
                            <span class="glyphicon glyphicon-remove-circle"></span>
                        </button>
                        <i class="fa fa-check text-succcess fa-lg" ng-if="alert.type==='success'"></i>
                        <i class="fa fa-exclamation-triangle text-danger fa-lg" ng-if="alert.type==='danger'"></i>
                        <i class="fa fa-exclamation-triangle text-warning fa-lg" ng-if="alert.type==='warning'"></i>
                        <i class="fa fa-info-circle text-info fa-lg" ng-if="alert.type==='info'"></i>{{alert.msg}}
                    </div>
                </div>

            </script>
            <script type="text/ng-template" id="employee.html">
                <div class="col-sm-12 text-center">
                    <strong>{{pc.fullName}}</strong>
                </div>
                <div class="col-sm-12"></div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>SSN:</strong></div>
                    <div class="col-sm-6 text-right">***-**-{{pc.ssnVal.substr(pc.ssnVal.length-4)}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Dept:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.department}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Hired:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.hireDate | date:'MM/dd/yyyy'}}</div>
                </div>

                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Pay Type:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.payType===1? 'Hourly' : pc.payType===2? 'Salary' : 'Piece-wise'}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Rate:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.rate | currency:'$'}}</div>
                </div>

            </script>
            <script type="text/ng-template" id="paytype.html">
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left">
                        <strong>{{pt.payTypeName}}</strong>

                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-9 text-left">
                        <i class="fa fa-arrow-right"></i>({{pt.fiscalStart | date:'MM/dd/yyyy'}} - {{pt.fiscalEnd | date:'MM/dd/yyyy'}})
                    </div>
                    <div class="col-sm-3 text-right">{{pt.available}} hrs</div>
                </div>
            </script>
            <script type="text/ng-template" id="wages.html">
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Gross Wage:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.payCheckWages.grossWage | currency:'$'}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Salary:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.payCheckWages.salary | currency:'$'}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>OT:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.overtime | currency:'$'}}</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left">&nbsp;</div>
                    <div class="col-sm-6 text-right">&nbsp;</div>
                </div>
                <div class="col-sm-12" ng-include="'comp.html'" ng-repeat="comp in pc.compensations"></div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left">&nbsp;</div>
                    <div class="col-sm-6 text-right">&nbsp;</div>
                </div>
                <div class="col-sm-12">
                    <div class="col-sm-6 text-left"><strong>Net Wage:</strong></div>
                    <div class="col-sm-6 text-right">{{pc.payCheckWages.netWage | currency:'$'}}</div>
                </div>
            </script>
            <script type="text/ng-template" id="comp.html">

                <div class="col-sm-6 text-left"><strong>{{comp.payTypeName}}:</strong></div>
                <div class="col-sm-6 text-right">{{comp.ytd | currency:'$'}}</div>


            </script>
            <script type="text/ng-template" id="tax.html">

                <div class="col-sm-4 text-left"><strong>{{tax.tax.code}}:</strong></div>
                <div class="col-sm-4 text-right">{{tax.ytdWage | currency:'$'}}</div>
                <div class="col-sm-4 text-right">{{tax.ytd | currency:'$'}}</div>


            </script>
            <script type="text/ng-template" id="ded.html">

                <div class="col-sm-6 text-left"><strong>{{ded.companyDeduction.deductionType.name}}:</strong></div>
                <div class="col-sm-6 text-right">{{ded.ytd | currency:'$'}}</div>


            </script>
            <script type="text/ng-template" id="popover/memento.html">

                <div class="modal-header">
                    <h2 class="modal-title">Version #{{memento.version}} Details</h2>
                </div>
                <div class="modal-body">

                    <div class="row" ng-if="sourceTypeId===2">
                        <company company="memento.object" main-data="mainData" is-popup="true" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===3">
                        <employee employee="memento.object" main-data="mainData" is-popup="false" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===1">

                    </div>
                    <div class="row" ng-if="sourceTypeId===8">
                        <regular-check item="memento.object" datasvc="dataSvc" company="mainData.selectedCompany" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===10">
                        <deposit-ticket item="memento.object" datasvc="dataSvc" company="mainData.selectedCompany" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===18">
                        <account-adjustment item="memento.object" datasvc="dataSvc" company="mainData.selectedCompany" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===19">
                        <tax-payment item="memento.object" datasvc="dataSvc" company="mainData.selectedCompany" show-controls="false" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===7">
                        <paycheck check="memento.object" main-data="mainData" />
                    </div>
                    <div class="row" ng-if="sourceTypeId===11">
                        <payroll-invoice invoice="memento.object" datasvc="dataSvc" host="mainData.selectedHost" main-data="mainData" show-controls="false" />
                    </div>

                </div>
            </script>
            <script type="text/ng-template" id="popover/company.html">

                <div class="modal-header">
                    <h2 class="modal-title">{{company.name}} Details</h2>
                    <button type="btn btn-sm pull-right" class="close" ng-click="cancel()">
                        <span class="glyphicon glyphicon-remove-circle"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <company company="company" main-data="mainData" is-popup="true" show-controls="true" />
                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="popover/confirm.html">
                <div class="modal-header">

                </div>
                <div class="modal-body">
                    <div class="alert alert-{{type}}" ng-bind-html="message">

                    </div>
                </div>
                <div class="modal-footer text-center">
                    <div class="row">
                        <button type="button" class="btn btn-sm btn-primary pull-center" data-ng-click="ok()">
                            <span class="glyphicon glyphicon-check"></span> Yes <i class="fa fa-lg fa-question-circle text-default"></i>
                        </button>
                        <button type="button" class="btn btn-sm btn-default pull-center" data-ng-click="cancel()">
                            <span class="glyphicon glyphicon-remove-circle"></span> No <i class="fa fa-lg fa-question-circle text-default"></i>
                        </button>
                    </div>
                    <div class="row alert alert-warning" ng-if="type==='danger'">
                        All activities are logged in the system.
                    </div>
                </div>

            </script>
            <script type="text/ng-template" id="dashboardaccumulation.html">
                <div class="widget widget-stats" ng-class="{'bg-black': acc.payTypeId===6, 'bg-blue': acc.payTypeId===5, 'bg-grey': acc.payTypeId===16}">
                    <div class="stats-icon"></div>
                    <div class="stats-info">
                        <h4>Available</h4>
                        <p>{{acc.available | currency:''}} hrs</p>
                    </div>
                    <div class="stats-info">
                        <h4>Accumulated : Used</h4>
                        <p>{{acc.ytdFiscal | currency:''}} : {{acc.ytdUsed | currency:''}}</p>
                    </div>
                    <div class="stats-link">
                        <a href="javascript:;">{{acc.payTypeName}}</a>
                    </div>

                </div>


            </script>
            @if (User.Identity.IsAuthenticated)
            {
                @*<div class="invoice">
                <div class="invoice-company">
                    <span class="pull-right hidden-print">
                        <a href="javascript:;" class="btn btn-sm btn-success m-b-10"><i class="fa fa-download m-r-5"></i> Export as PDF</a>
                        <a href="javascript:;" onclick="window.print()" class="btn btn-sm btn-success m-b-10"><i class="fa fa-print m-r-5"></i> Print</a>
                    </span>
                    Company Name, Inc
                </div>
            </div>*@

                @*<div class="invoice row">
                <div class="invoice-company">
                    <span class=" col-sm-6 pull-right hidden-print">
                        <div class="col-sm-6">
                            <select id="host" class="form-control" ng-change="hostSelected()" ng-disabled="data.hosts.length===1" ng-model="data.selectedHost" ng-options="host1.firmName for host1 in data.hosts track by host1.id">
                                <option value="">Select Host</option>
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" placeholder="Type Company Name" ng-show="data.showCompanies" ng-disabled="data.hostCompanies.length===0" ng-model="data.selectedCompany1" ng-mouseenter="data.selectedCompany1=null;$viewValue=null" ng-mouseleave="data.selectedCompany1=null;$viewValue=null" typeahead-show-hint="true" typeahead-on-select="companySelected()" uib-typeahead="company as company.name for company in data.hostCompanies | filter:{name:$viewValue}">
                        </div>
                    </span>
                    {{data.selectedCompany.name}} <span class="show-red" ng-show="data.selectedCompany.isLocation">(is a location)</span>
                </div>
            </div>*@

                <div class="row form-group hidden-print" ng-show="data.showFilterPanel" ng-if="data.isReady">
                    <div class="col-sm-3 pull-right">
                        <input type="text" class="form-control" placeholder="Type Company Name" ng-show="data.showCompanies" ng-disabled="data.hostCompanies.length===0" ng-model="data.selectedCompany1" ng-mouseenter="data.selectedCompany1=null;$viewValue=null" ng-mouseleave="data.selectedCompany1=null;$viewValue=null" typeahead-show-hint="true" typeahead-on-select="companySelected()" uib-typeahead="company as company.name for company in data.hostCompanies | filter:{name:$viewValue}">
                    </div>
                    <div class="col-sm-3 pull-right">
                        <select id="host" class="form-control" ng-change="hostSelected()" ng-disabled="data.hosts.length===1" ng-model="data.selectedHost" ng-options="host1.firmName for host1 in data.hosts track by host1.id">
                            <option value="">Select Host</option>
                        </select>
                    </div>

                    <div class="col-sm-4 pull-left" ng-show="data.selectedCompany && data.selectedCompany.id"><h5 class="pull-right"><em>You are viewing company: {{data.selectedCompany.name}} <span class="show-red" ng-show="data.selectedCompany.isLocation">(is a location)</span></em></h5></div>


                </div>
                <div class="col-sm-12 visible-print" ng-show="data.selectedCompany && data.selectedCompany.id && data.showCompanies"><h5><em><u>{{data.selectedCompany.name}}</u></em></h5></div>

                <div ng-view></div>
            }




        </div>
		
		<!-- end #sidebar -->
		<!-- begin #content -->
		
		

		</div>
		}
else
{
	<div id="page-container" ng-controller="mainCtrl" class="fade page-without-sidebar page-header-fixed" ng-app="common" data-host="@CurrentUser.Host" data-company="@CurrentUser.Company" data-employee="@CurrentUser.Employee" data-role="@CurrentUser.Role" data-name="@CurrentUser.FullName" data-claims="@CurrentUser.GetClaimsSerialized()">
		@Html.Partial("_TopNavbar")
		<div class="embed-responsive" style="padding-bottom: 47%">
			<iframe class="embed-responsive-item" src="http://ipaxol.com/" allowfullscreen></iframe>
		</div>
		@*@Html.Partial("Welcome")*@
		<div class="modal fade" id="modal-dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

					</div>
					<div class="modal-body">

						@Html.Partial("_LogiPartialModal")

					</div>

				</div>
			</div>
		</div>
	</div>
}
	


		@RenderBody()

		<!-- /#page-wrapper -->
		<!-- ========================= SCRIPTS ================================ -->
		@Scripts.Render("~/bundles/slimScroll")

		@RenderSection("scripts", false)
		<script>
			$(document).ready(function () {
				App.init();
				//angular.bootstrap(document.getElementById('loginpartialmodal'), ['common']);
				var min = $('a[data-click=sidebar-minify]:first');
				min.click();
			});
		</script>


</body>
	</html>
