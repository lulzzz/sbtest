@using HrMaxxWeb.Code.Helpers
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>@ViewBag.Title</title>
  @if (IsSectionDefined("Styles"))
	{
		@RenderSection("Styles", false)
	}
	@Styles.Render("~/bundles/site-less")

	
	<!--[if lt IE 9]>
		@Scripts.Render("~/bundles/html5")
	<![endif]-->
	@*@Styles.Render("~/bundles/site-less")*@
	@Scripts.Render("~/bundles/bootstrapjquery")

	@Scripts.Render("~/bundles/angular")
	
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>
	
	<!-- end #page-loader -->
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed" ng-app="common">
		<!-- begin #header -->
		@Html.Partial("_TopNavbar") 
		<!-- end #header -->
		<!-- begin #sidebar -->
		@if (User.Identity.IsAuthenticated)
		{
			@Html.Partial("_Navigation")
		}
		
		<!-- end #sidebar -->
		<!-- begin #content -->
		<div id="content" class="content" ng-controller="mainCtrl" data-host="@CurrentUser.Host" data-company="@CurrentUser.Company">
			<div class="panel panel-inverse" ng-show="data.showFilterPanel" ng-if="data.isReady">
				<div class="panel-heading" ng-click="data.isFilterOpen=!data.isFilterOpen">
					<h4 class="panel-title">Host and Company Filter<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': data.isFilterOpen, 'glyphicon-chevron-right': !data.isFilterOpen}"></i></h4>
				</div>
				<div class="panel-body" ng-show="data.isFilterOpen">
					<div class="row form-group">
						<label for="host" class="col-md-2 control-label">Hosts</label>
						<div class="col-md-4">
							<select id="host" class="form-control" ng-change="hostSelected()" ng-disabled="data.hosts.length===1" ng-model="data.selectedHost" ng-options="host1.firmName for host1 in data.hosts track by host1.id">
								<option value="">Please select...</option>
							</select>
						</div>
					</div>
					<div class="row form-group" ng-show="data.showCompanies">
						<label for="company" class="col-md-2 control-label">Companies</label>
						<div class="col-md-4">
							<input type="text" placeholder="Company Name" ng-disabled="data.companies.length===0" ng-model="data.selectedCompany1" typeahead-on-select="companySelected($item, $model, $label, $event)" uib-typeahead="company as company.name for company in data.companies | filter:$viewValue" class="form-control">
							
						</div>
					</div>
				</div>
			</div>
			<div class="row" ng-show="data.selectedCompany && data.selectedCompany.id">
				<h5 class="pull-right"><em>You are viewing company: {{data.selectedCompany.name}}</em></h5>
			</div>
			<div class="row">
				<div ng-repeat="alert in alerts" class="alert" ng-class="{'alert-success':alert.type==='success', 'alert-danger':alert.type==='danger'}">
					{{alert.msg}}
				</div>
			</div>
			<div ng-view></div>
			@RenderBody()
		</div>
		<!-- end #content -->
		<!-- Footer -->
		<div id="footer" class="footer">
			@Html.Partial("_Footer")
		</div>

	</div>
		

	<div class="modal fade" id="modal-dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					               
				</div>
				<div class="modal-body">
					@if (!Request.IsAuthenticated)
					{
						@Html.Partial("_LogiPartialModal")
					}
				</div>

			</div>
		</div>
	</div>
			<!-- /#page-wrapper -->
			<!-- ========================= SCRIPTS ================================ -->
			@Scripts.Render("~/bundles/slimScroll")
		
			@RenderSection("scripts", false)
	<script>
		$(document).ready(function() {
			App.init();
			angular.bootstrap(document.getElementById('loginpartialmodal'), ['common']);
			
		});
	</script>

		
</body>
</html>
